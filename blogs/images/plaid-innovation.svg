<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700" font-family="'Segoe UI', Arial, sans-serif">
    <defs>
        <linearGradient id="bgP" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#f8f9fb"/>
            <stop offset="100%" stop-color="#eaecf0"/>
        </linearGradient>
        <filter id="shP" x="-1%" y="-2%" width="102%" height="108%">
            <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="#00000010"/>
        </filter>
        <marker id="aP" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
            <path d="M0,0 L8,3 L0,6 Z" fill="#64748b"/>
        </marker>
        <linearGradient id="funnelGreen" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#bbf7d0"/>
            <stop offset="100%" stop-color="#86efac"/>
        </linearGradient>
        <linearGradient id="funnelAmber" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#fde68a"/>
            <stop offset="100%" stop-color="#fbbf24"/>
        </linearGradient>
        <linearGradient id="funnelPurple" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#ddd6fe"/>
            <stop offset="100%" stop-color="#c4b5fd"/>
        </linearGradient>
    </defs>

    <rect width="900" height="700" rx="10" fill="url(#bgP)" stroke="#dee2e6" stroke-width="1"/>

    <!-- Title -->
    <text x="450" y="26" text-anchor="middle" font-size="16" font-weight="700" fill="#1e293b">PLAID's Key Innovation: Progressive Filtering Before Disk Access</text>
    <text x="450" y="46" text-anchor="middle" font-size="11" fill="#94a3b8">Vanilla ColBERTv2 decompresses all candidates. PLAID eliminates 98% using only centroid IDs (Tier 1) first.</text>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- LEFT: Vanilla ColBERTv2 (2-stage)            -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <rect x="20" y="62" width="400" height="628" rx="8" fill="#fef2f2" stroke="#fecaca" stroke-width="1.5" filter="url(#shP)"/>
    <rect x="20" y="62" width="400" height="30" rx="8" fill="#dc2626"/>
    <rect x="20" y="84" width="400" height="8" fill="#dc2626"/>
    <text x="220" y="83" text-anchor="middle" font-size="13" font-weight="700" fill="#ffffff">Vanilla ColBERTv2 â€” Two Stages</text>

    <!-- Stage 1: same for both -->
    <rect x="60" y="104" width="320" height="60" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1.5"/>
    <text x="220" y="122" text-anchor="middle" font-size="11" font-weight="700" fill="#166534">Stage 1: Centroid Lookup</text>
    <text x="220" y="140" text-anchor="middle" font-size="10" fill="#475569">140M docs â†’ <tspan font-weight="700">~50,000 candidates</tspan></text>
    <text x="220" y="155" text-anchor="middle" font-size="9" fill="#16a34a">Tier 1 Â· In RAM Â· Fast</text>

    <!-- Wide funnel bar representing 50K candidates -->
    <rect x="52" y="174" width="336" height="14" rx="4" fill="url(#funnelGreen)" stroke="#22c55e" stroke-width="1" opacity="0.8"/>
    <text x="220" y="184" text-anchor="middle" font-size="8" font-weight="700" fill="#166534">50,000 candidates</text>

    <!-- Arrow straight down â€” no intermediate filtering -->
    <line x1="220" y1="188" x2="220" y2="218" stroke="#dc2626" stroke-width="2.5" marker-end="url(#aP)"/>
    <text x="310" y="206" font-size="10" font-weight="700" fill="#dc2626">No intermediate</text>
    <text x="310" y="218" font-size="10" font-weight="700" fill="#dc2626">filtering!</text>

    <!-- Stage 2: Full decompression of ALL 50K -->
    <rect x="40" y="224" width="360" height="205" rx="6" fill="#fff1f2" stroke="#fca5a5" stroke-width="1.5"/>
    <text x="220" y="244" text-anchor="middle" font-size="11" font-weight="700" fill="#991b1b">Stage 2: Decompress + Exact MaxSim</text>
    <text x="220" y="262" text-anchor="middle" font-size="10" fill="#991b1b">Applied to ALL 50,000 candidates</text>

    <!-- Cost breakdown -->
    <rect x="60" y="278" width="280" height="28" rx="4" fill="#ffffff" stroke="#fecaca" stroke-width="1"/>
    <text x="68" y="290" font-size="9" fill="#475569">ğŸ’¾</text>
    <text x="82" y="296" font-size="10" fill="#991b1b"><tspan font-weight="700">Disk reads:</tspan> 50,000 Ã— 2 KB = <tspan font-weight="700">100 MB</tspan></text>

    <rect x="60" y="312" width="280" height="28" rx="4" fill="#ffffff" stroke="#fecaca" stroke-width="1"/>
    <text x="68" y="324" font-size="9" fill="#475569">ğŸ”¢</text>
    <text x="82" y="330" font-size="10" fill="#991b1b"><tspan font-weight="700">Dot products:</tspan> 50K Ã— 3,200 = <tspan font-weight="700">160M ops</tspan></text>

    <rect x="60" y="346" width="280" height="28" rx="4" fill="#ffffff" stroke="#fecaca" stroke-width="1"/>
    <text x="68" y="358" font-size="9" fill="#475569">â±ï¸</text>
    <text x="82" y="364" font-size="10" fill="#991b1b"><tspan font-weight="700">Latency:</tspan> ~350 ms (GPU) / ~14 sec (CPU)</text>

    <text x="220" y="397" text-anchor="middle" font-size="9" fill="#991b1b">Tier 2 (disk) + Tier 3 (reconstruct)</text>
    <text x="220" y="414" text-anchor="middle" font-size="10" font-weight="700" fill="#991b1b">All cost applied to all 50,000</text>

    <!-- Result -->
    <rect x="120" y="440" width="200" height="36" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
    <text x="220" y="462" text-anchor="middle" font-size="12" font-weight="700" fill="#166534">Top-k results</text>

    <!-- Total cost annotation -->
    <rect x="55" y="500" width="330" height="50" rx="6" fill="#ffffff" stroke="#dc2626" stroke-width="2"/>
    <text x="220" y="518" text-anchor="middle" font-size="11" font-weight="700" fill="#dc2626">Total per-query cost</text>
    <text x="220" y="536" text-anchor="middle" font-size="10" fill="#991b1b">100 MB disk I/O Â· 160M dot products Â· ~14s CPU</text>

    <!-- Big X or inefficiency marker -->
    <text x="220" y="580" text-anchor="middle" font-size="13" font-weight="700" fill="#dc2626">98% of decompression was wasted</text>
    <text x="220" y="598" text-anchor="middle" font-size="10" fill="#64748b">Most candidates scored poorly and were discarded</text>
    <text x="220" y="616" text-anchor="middle" font-size="10" fill="#64748b">but we paid full disk + compute cost for all of them</text>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- RIGHT: PLAID (4-stage)                       -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <rect x="440" y="62" width="440" height="628" rx="8" fill="#f0fdf4" stroke="#86efac" stroke-width="1.5" filter="url(#shP)"/>
    <rect x="440" y="62" width="440" height="30" rx="8" fill="#16a34a"/>
    <rect x="440" y="84" width="440" height="8" fill="#16a34a"/>
    <text x="660" y="83" text-anchor="middle" font-size="13" font-weight="700" fill="#ffffff">PLAID â€” Four Stages (progressive filtering)</text>

    <!-- Stage 1: Centroid Lookup (same) -->
    <rect x="480" y="104" width="360" height="60" rx="6" fill="#f0fdf4" stroke="#86efac" stroke-width="1.5"/>
    <text x="660" y="122" text-anchor="middle" font-size="11" font-weight="700" fill="#166534">Stage 1: Centroid Lookup</text>
    <text x="660" y="140" text-anchor="middle" font-size="10" fill="#475569">140M docs â†’ <tspan font-weight="700">~50,000 candidates</tspan></text>
    <text x="660" y="155" text-anchor="middle" font-size="9" fill="#16a34a">Tier 1 Â· In RAM Â· Fast</text>

    <!-- Wide funnel bar -->
    <rect x="472" y="174" width="376" height="14" rx="4" fill="url(#funnelGreen)" stroke="#22c55e" stroke-width="1" opacity="0.8"/>
    <text x="660" y="184" text-anchor="middle" font-size="8" font-weight="700" fill="#166534">50,000 candidates</text>

    <!-- Arrow down -->
    <line x1="660" y1="188" x2="660" y2="200" stroke="#64748b" stroke-width="1.5" marker-end="url(#aP)"/>

    <!-- â˜… STAGE 2: Centroid Pruning (PLAID innovation) -->
    <rect x="500" y="206" width="320" height="72" rx="6" fill="#fefce8" stroke="#fbbf24" stroke-width="2"/>
    <rect x="499" y="204" width="10" height="10" rx="5" fill="#f59e0b" stroke="#ffffff" stroke-width="2"/>
    <text x="512" y="213" font-size="8" font-weight="700" fill="#92400e">â˜… NEW</text>
    <text x="660" y="226" text-anchor="middle" font-size="11" font-weight="700" fill="#854d0e">Stage 2: Centroid Pruning</text>
    <text x="660" y="244" text-anchor="middle" font-size="9" fill="#475569">For each candidate, remove centroids with low similarity</text>
    <text x="660" y="258" text-anchor="middle" font-size="9" fill="#475569">to <tspan font-weight="600">any</tspan> query token â†’ sparsified representations</text>
    <text x="660" y="272" text-anchor="middle" font-size="9" fill="#ca8a04">Still Tier 1 only Â· No disk access Â· Precomputed distances</text>

    <!-- Narrower funnel bar (same count, but sparsified) -->
    <rect x="502" y="286" width="316" height="12" rx="4" fill="url(#funnelAmber)" stroke="#f59e0b" stroke-width="1" opacity="0.7"/>
    <text x="660" y="296" text-anchor="middle" font-size="8" font-weight="600" fill="#854d0e">50,000 candidates (sparsified: ~50B/doc â†’ from 200B)</text>

    <!-- Arrow down -->
    <line x1="660" y1="298" x2="660" y2="310" stroke="#64748b" stroke-width="1.5" marker-end="url(#aP)"/>

    <!-- â˜… STAGE 3: Centroid Interaction Scoring (PLAID innovation) -->
    <rect x="500" y="316" width="320" height="82" rx="6" fill="#faf5ff" stroke="#8b5cf6" stroke-width="2"/>
    <rect x="499" y="314" width="10" height="10" rx="5" fill="#8b5cf6" stroke="#ffffff" stroke-width="2"/>
    <text x="512" y="323" font-size="8" font-weight="700" fill="#6b21a8">â˜… NEW</text>
    <text x="660" y="336" text-anchor="middle" font-size="11" font-weight="700" fill="#6b21a8">Stage 3: Centroid Interaction Scoring</text>
    <text x="660" y="354" text-anchor="middle" font-size="9" fill="#475569">Approximate MaxSim using only surviving centroids</text>
    <text x="660" y="368" text-anchor="middle" font-size="9" fill="#475569">Queryâ†”centroid distances precomputed once, <tspan font-weight="600">reused for all docs</tspan></text>
    <text x="660" y="382" text-anchor="middle" font-size="9" fill="#475569">Rank candidates â†’ keep only top ~1,000</text>
    <text x="660" y="394" text-anchor="middle" font-size="9" fill="#7c3aed">Still Tier 1 only Â· No disk access Â· O(1) lookups per centroid</text>

    <!-- Much narrower funnel bar (1K candidates) -->
    <rect x="582" y="404" width="156" height="12" rx="4" fill="url(#funnelPurple)" stroke="#8b5cf6" stroke-width="1" opacity="0.8"/>
    <text x="660" y="414" text-anchor="middle" font-size="8" font-weight="700" fill="#6b21a8">~1,000 candidates (98% eliminated)</text>

    <!-- Arrow down -->
    <line x1="660" y1="416" x2="660" y2="428" stroke="#64748b" stroke-width="1.5" marker-end="url(#aP)"/>

    <!-- Stage 4: Full decompression (only ~1K) -->
    <rect x="530" y="434" width="260" height="110" rx="6" fill="#eff6ff" stroke="#93c5fd" stroke-width="1.5"/>
    <text x="660" y="454" text-anchor="middle" font-size="11" font-weight="700" fill="#1e40af">Stage 4: Decompress + Exact MaxSim</text>
    <text x="660" y="472" text-anchor="middle" font-size="10" fill="#1e40af">Only <tspan font-weight="700">~1,000</tspan> candidates</text>

    <text x="660" y="494" text-anchor="middle" font-size="9" fill="#475569">ğŸ’¾ Disk: 1,000 Ã— 2 KB = <tspan font-weight="700" fill="#1e40af">2 MB</tspan></text>
    <text x="660" y="510" text-anchor="middle" font-size="9" fill="#475569">ğŸ”¢ Ops: 1K Ã— 3,200 = <tspan font-weight="700" fill="#1e40af">3.2M</tspan></text>
    <text x="660" y="526" text-anchor="middle" font-size="9" fill="#475569">â±ï¸ Latency: <tspan font-weight="700" fill="#1e40af">~50 ms</tspan> (GPU) / <tspan font-weight="700" fill="#1e40af">~310 ms</tspan> (CPU)</text>
    <text x="660" y="540" text-anchor="middle" font-size="9" fill="#1e40af">Tier 2 (disk) + Tier 3 (reconstruct)</text>

    <!-- Result -->
    <rect x="580" y="554" width="160" height="36" rx="6" fill="#dcfce7" stroke="#22c55e" stroke-width="1.5"/>
    <text x="660" y="576" text-anchor="middle" font-size="12" font-weight="700" fill="#166534">Top-k results</text>

    <!-- Total cost annotation -->
    <rect x="480" y="602" width="380" height="50" rx="6" fill="#ffffff" stroke="#16a34a" stroke-width="2"/>
    <text x="660" y="620" text-anchor="middle" font-size="11" font-weight="700" fill="#166534">Total per-query cost</text>
    <text x="660" y="638" text-anchor="middle" font-size="10" fill="#166534">2 MB disk I/O Â· 3.2M dot products Â· ~310ms CPU</text>

    <!-- Savings summary -->
    <text x="660" y="672" text-anchor="middle" font-size="12" font-weight="700" fill="#166534">50Ã— less disk Â· 50Ã— fewer ops Â· 45Ã— faster</text>
    <text x="660" y="688" text-anchor="middle" font-size="10" fill="#475569">Same quality (exact MaxSim on final candidates)</text>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- Center divider                               -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <line x1="430" y1="100" x2="430" y2="680" stroke="#cbd5e1" stroke-width="1" stroke-dasharray="6,4"/>
    <text x="430" y="660" text-anchor="middle" font-size="9" fill="#94a3b8" transform="rotate(-90, 430, 400)">vs</text>
</svg>